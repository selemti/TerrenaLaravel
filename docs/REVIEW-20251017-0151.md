Review de entrega — 20251017-0151

Nuevos archivos
- docs/DOC_GENERAL-20251017-0143.md
- docs/DOC_GENERAL-20251017-0146.md
- docs/DOC_RUTAS_Y_CASOS_DE_USO-20251017-0143.md
- docs/DOC_DB_PUBLIC_Y_SELEMTI-20251017-0139.md
- docs/DOC_DB_PUBLIC_Y_SELEMTI-20251017-0148.md
- docs/DOC_PLAN_DE_ATAQUE-20251017-0132.md
- docs/DOC_WIZARD_CORTE_CAJA-20251017-0126.md (previo en esta sesión)
- docs/DOC_CONTROLADORES_Y_VISTAS-20251017-0126.md (previo)
- docs/db_inventory-20251017-015122.json (inventario completo JSON)

Scripts auxiliares (solo lectura)
- scripts/db_search_path.php
- scripts/db_inventory.php
- scripts/db_indexes_core.php
- scripts/db_table_details.php
- scripts/db_version.php

Hallazgos críticos (resumen)
- API Caja sin auth → proteger /api/caja/*.
- Kernel no estándar → middleware (CORS/throttle/auth) puede no aplicarse.
- BD: falta índice en selemti.precorte_efectivo(precorte_id) y duplicidad en selemti.precorte(sesion_id).
- Wizard: ID modal inconsistente, guard desactivado, store_id hardcodeado, mojibake.
- PostgreSQL 9.5 (EOL) → plan de actualización.

Tests
- 1 test Feature fallido (PrecorteApiTest::example) — ruta '/' retorna 404 en test.

Sugerencias prioritarias
- Auth/roles para /api/caja.
- Unificar IDs Wizard y restaurar guardias.
- Índices DB (agregar precorte_efectivo FK, eliminar duplicado precorte).
- Revisar preflight en ticket con índice parcial.
- Plan de upgrade PostgreSQL.
